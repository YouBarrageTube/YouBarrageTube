webpackJsonp([1],{"3Dvv":function(e,t){},"7kKu":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},i,!1,function(e){n("dzjc")},null,null).exports,o=n("/ocq"),s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"80%",height:"100%"}},e._l(e.currentComments,function(t){return n("span",{key:t.id,class:{pause:!e.isPlaying},style:{top:t.height+"%"}},[e._v(e._s(t.comment))])}))},staticRenderFns:[]};var c=n("VU/8")({name:"Barrage",props:["isPlaying","playerWidth","playerHeight","currentComments"]},s,!1,function(e){n("3Dvv")},"data-v-0c00eaae",null).exports,u=n("//Fk"),l=n.n(u),d=function(e,t,n,r){var i=this;this.el=e,this.id=t,new l.a(function(e){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}).then(function(e){i.player=new e.Player(i.el,{height:n,width:r,videoId:i.id,playerVars:{controls:0,disablekb:0,fs:0,showinfo:0,rel:0}})})},m={name:"Player",props:["isPlaying","videoId","playerWidth","playerHeight"],watch:{isPlaying:function(e,t){t?this.player.player.pauseVideo():this.player.player.playVideo()}},mounted:function(){this.player=new d(this.$el,this.videoId,this.playerHeight,this.playerWidth);var e=this;setInterval(function(){e.$emit("onTimeUpdate",Math.floor(e.player.player.getCurrentTime()))},1e3)}},p={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticStyle:{width:"80%",height:"100%"}})},staticRenderFns:[]};var h=n("VU/8")(m,p,!1,function(e){n("zmbd")},"data-v-7827f427",null).exports,v=n("mtWM"),f=n.n(v),y={name:"BarragePlayer",data:function(){return{videoId:"A0D1h30kXlI",isPlaying:!1,currentTime:0,currentInput:"",submitedInput:"",playerWidth:.7*window.innerWidth,playerHeight:.7*window.innerWidth/16*9,comments:[],currentComments:[],currentIndex:0}},components:{barrage:c,player:h},methods:{play:function(e){e.preventDefault(),this.isPlaying=!this.isPlaying},addComment:function(e){e.preventDefault(),this.submitedInput=this.currentInput,this.currentInput="";var t={videoId:this.videoId,comment:this.submitedInput,videoTime:this.currentTime};console.log(t),f.a.post("/v1/comment",{videoId:this.videoId,comment:this.submitedInput,videoTime:this.currentTime}).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)}),t.height=5*Math.floor(20*Math.random()),this.currentComments.push(t)},updateCurrentComments:function(e){for(var t=this.comments,n=this.currentIndex,r=this.currentComments;n<t.length&&t[n].videoTime<=e;)r.push(t[n]),t[n].height=5*Math.floor(20*Math.random()),n++;for(;r[0]&&e-r[0].videoTime>=10;)r.shift();this.currentIndex=n,console.log(this.currentComments)}},mounted:function(){var e=this;f.a.get("/v1/comments",{params:{videoId:this.videoId}}).then(function(t){console.log(t.data),e.comments=t.data,e.updateCurrentComments.call(e,e.currentTime)})},watch:{currentTime:function(e,t){this.updateCurrentComments.call(this,e)}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"}},[n("div",{staticClass:"player-container",on:{click:e.play}},[n("player",{attrs:{isPlaying:e.isPlaying,videoId:e.videoId,playerWidth:e.playerWidth,playerHeight:e.playerHeight},on:{onTimeUpdate:function(t){e.currentTime=t}}}),e._v(" "),n("barrage",{attrs:{isPlaying:e.isPlaying,playerWidth:e.playerWidth,playerHeight:e.playerHeight,currentComments:e.currentComments}})],1),e._v(" "),n("p",[e._v(e._s(e.currentTime)+"s")]),n("p"),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentInput,expression:"currentInput"}],attrs:{placeholder:"add your comment"},domProps:{value:e.currentInput},on:{input:function(t){t.target.composing||(e.currentInput=t.target.value)}}}),e._v(" "),n("button",{on:{click:e.addComment}},[e._v("Submit")])])},staticRenderFns:[]};var I={components:{"barrage-player":n("VU/8")(y,g,!1,function(e){n("m3M1")},"data-v-4b659304",null).exports}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"frame"},[t("barrage-player")],1)},staticRenderFns:[]};var _=n("VU/8")(I,w,!1,function(e){n("7kKu")},"data-v-e0b089b4",null).exports;r.a.use(o.a);var b=new o.a({routes:[{path:"/",name:"Frame",component:_}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:b,components:{App:a},template:"<App/>"})},dzjc:function(e,t){},m3M1:function(e,t){},zmbd:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b09ebd07b3e8930c86b9.js.map